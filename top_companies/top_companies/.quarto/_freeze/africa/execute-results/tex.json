{
  "hash": "f97b5904f556b6d35b3fb5eb54a9518a",
  "result": {
    "markdown": "---\nsubtitle: \"**Analyzing Top Companies Africa with Python and Pandas**\"\ntitle: \"Navigating Africa's Business Landscape through Python Data Analysis\"\nauthor:\n  - name: John Karuitha\n    orcid: 0000-0002-8204-7034\n    email: jkaruitha@karu.ac.ke\n    affiliations:\n      - name: Karatina University, School of Business\n        address: P.O. Box 1957-00100\n        city: Karatina\n        state: Kenya\n        postal-code: 10101\n      - name: Graduate School of Business Administration, University of the Witwatersrand\n        address: 2nd St Davids Pl & St Andrew Rd, Parktown\n        city: Johannesburg\n        state: South Africa\n        postal-code: 2193\ntitle-block-banner: \"africa.jpeg\"\ntitle-block-banner-color: \"black\"\nself-contained: true\ndate: today\ndate-modified: today\ndate-format: long\nformat: \n  html:\n    theme: cerulean\n    toc: true\n    toc-depth: 3\n    number-sections: true\n    number-depth: 3\n    smooth-scroll: true\n    code-fold: false\nexecute: \n  message: false\n  warning: false\n  echo: fenced\nbibliography: references.bib\ncsl: apa.csl\n---\n\n# **Background**\n\nIn this analysis, we use data from Kagle[@top2000companies] to illustrate the use of Python and Pandas in data analysis[@vanderplas2016python]. The data captures the top 2000 companies in the world and is available for free upon registration on the [Kagle website](https://www.kaggle.com/datasets/joebeachcapital/top-2000-companies-globally). We filter the data to include companies from Africa.\n\n# **Objectives**\n\nThe primary goal of this exercise is to illustrate how to use Python, pandas and other libraries in Python programming to analyse data for meaningful insights about large companies in Africa.\n\nSpecifically, we seek to;\n\n1.  Rank companies in Africa by their performance.\n2.  Rank countries in Africa based on the concentration of large companies.\n3.  Compute the correlation between company size (in terms of assets) and financial performance.\n4.  Uncover regional patterns in company performance based on country.\n5.  Establish the companies, countries with the highest returns on assets and profit margins.\n\n# **Summary of Results**\n\n1.  Most large companies in the sample are located in South Africa.\n2.  There is a positive relationship between company size and financial performance (sales, profits, market value). However, this relationship varies across countries.\n3.  Companies from South Africa have the highest sales, profits, asset base, and valuation.\n4.  Companies in Nigeria are more efficient in converting sales and assets into profits.\n\n**NB: ALL FIGURES ARE IN BILLIONS OF US DOLLARS**\n\n::: callout-tip\nPlease visit my [rpubs site](www.rpubs.com/Karuitha) to see more data projects. Alternatively, copy and paste the link <www.rpubs.com/Karuitha> into your browser. You can also view my [linkedin](www.linkedin.com/in/Karuitha) site for my skills and education.\n\nMy [Tableau public profile](https://public.tableau.com/app/profile/john.karuitha) contains my data visualizations.\n\nMy Shiny web apps are available on this [site](<https://karuitha.shinyapps.io/>). You can copy-paste this web address instead <https://karuitha.shinyapps.io>\n:::\n\n\n\n::: callout-tip\nSkills & Technologies Applied: Python, Pandas, Geopandas, Matplotlib, Quarto, Data Science.\n:::\n\n# **Data**\n\nThe data is available on [kagle](https://www.kaggle.com/datasets/joebeachcapital/top-2000-companies-globally) as a csv file (registration is required to access the data). I start by loading the necessary packages for the analysis: pandas, numpy, matplotlib, and seaborn [@borjigin2023].\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport geopandas as gpd\nfrom shapely.geometry import Point\n```\n:::\n\n\nNext I read in the data using pandas and set the index column as the name of the company given it is a unique and meaningful identifier.\n\n::: {.cell execution_count=2}\n```` { .cell-code}\n```{{python}}\ncompany = pd.read_csv(\"Top2000CompaniesGlobally.csv\")\n\ncompany.columns\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\nIndex(['Global Rank', 'Company', 'Sales ($billion)', 'Profits ($billion)',\n       'Assets ($billion)', 'Market Value ($billion)', 'Country', 'Continent',\n       'Latitude', 'Longitude'],\n      dtype='object')\n```\n:::\n:::\n\n\nNext, I rename the columns using names that are easier to work with. I create a dictionary of old names versus new names and then rename the columns.\n\n::: {.cell execution_count=3}\n```` { .cell-code}\n```{{python}}\n## Create a dictionary of old names vs new names\nnames = {'Global Rank':'rank', \n'Sales ($billion)':'sales', \n'Profits ($billion)':'profits',\n'Assets ($billion)':'assets', \n'Market Value ($billion)':'market_value', \n'Country':'country', \n'Continent':'continent',\n'Latitude':'latitude', \n'Longitude':'longitude',\n'Company':'company'}\n\n# Rename the columns in place\ncompany.rename(columns = names, inplace = True)\n```\n\n````\n:::\n\n\nNext, we filter the data to narrow down on Africa.\n\n::: {.cell execution_count=4}\n```` { .cell-code}\n```{{python}}\ncompany = company[company['continent'] == \"Africa\"]\n```\n\n````\n:::\n\n\n::: {.cell execution_count=5}\n```` { .cell-code}\n```{{python}}\n## Addd the index\ncompany.set_index(\"company\", inplace = True)\n```\n\n````\n:::\n\n\n# **Data Exploration**\n\nWe now explore the data.\n\n## Number of rows and columns\n\nWe start with the number of rows and columns in the data.\n\n::: {.cell execution_count=6}\n```` { .cell-code}\n```{{python}}\ncompany.shape\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=6}\n```\n(25, 9)\n```\n:::\n:::\n\n\nWe see that the data has 25 rows (records) and 9 columns (variables).\n\n## First and Last Rows of the Data\n\nNext, lets examine the first 5 rows.\n\n::: {.cell execution_count=7}\n```` { .cell-code}\n```{{python}}\ncompany.head(5)\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=tex}\n\\begin{tabular}{lrrrrrllrr}\n\\toprule\n{} &  rank &  sales &  profits &  assets &  market\\_value &       country & continent &   latitude &  longitude \\\\\ncompany             &       &        &          &         &               &               &           &            &            \\\\\n\\midrule\nStandard Bank Group &   231 &   21.0 &      1.9 &   182.0 &          19.9 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\nSasol               &   320 &   20.8 &      2.9 &    24.7 &          29.4 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\nMTN Group           &   345 &   16.5 &      2.5 &    21.4 &          34.5 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\nFirstRand           &   397 &    8.4 &      1.6 &    94.1 &          18.0 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\nSanlam              &   574 &   10.8 &      0.7 &    52.3 &          10.7 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nWe also check the last 7 rows.\n\n::: {.cell execution_count=8}\n```` { .cell-code}\n```{{python}}\ncompany.tail(7)\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=8}\n```{=tex}\n\\begin{tabular}{lrrrrrllrr}\n\\toprule\n{} &  rank &  sales &  profits &  assets &  market\\_value &       country & continent &   latitude &  longitude \\\\\ncompany                       &       &        &          &         &               &               &           &            &            \\\\\n\\midrule\nGold Fields                   &  1435 &    3.4 &      0.7 &    11.2 &           5.9 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\nImperial Holdings             &  1658 &    9.9 &      0.4 &     5.5 &           4.2 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\nAspen Pharmacare Holdings     &  1711 &    1.9 &      0.4 &     3.8 &           9.7 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\nRMB Holdings                  &  1716 &    0.6 &      0.6 &     3.3 &           6.1 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\nBanque Centrale Populaire     &  1871 &    1.9 &      0.2 &    32.0 &           3.9 &       Morocco &    Africa &  31.791702 &  -7.092620 \\\\\nAssore                        &  1948 &    1.6 &      0.5 &     2.1 &           5.2 &  South Africa &    Africa & -30.559482 &  22.937506 \\\\\nCommercial International Bank &  1966 &    1.5 &      0.3 &    14.8 &           2.8 &         Egypt &    Africa &  26.820553 &  30.802498 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n## Visual Summary\n\nlet us use seaborn pairplot() function to create a summary picture of the data using all variables, colored by country.\n\n::: {.cell execution_count=9}\n```` { .cell-code}\n```{{python}}\n#| fig-cap: \"Pairs plots for the Variables (A)\"\nsns.pairplot(company[['country', 'sales', 'profits', 'assets', 'market_value']], hue = \"country\", corner = True, palette = \"Dark2\", kind = \"scatter\")\n```\n\n````\n\n::: {.cell-output .cell-output-display}\n![Pairs plots for the Variables (A)](africa_files/figure-pdf/cell-10-output-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n::: {.cell execution_count=10}\n```` { .cell-code}\n```{{python}}\n#| fig-cap: \"Pairs plots for the Variables (B)\"\nsns.pairplot(company[['country', 'sales', 'profits', 'assets', 'market_value']], corner = True, palette = \"Dark2\", kind = \"kde\")\n```\n\n````\n\n::: {.cell-output .cell-output-display}\n![Pairs plots for the Variables (B)](africa_files/figure-pdf/cell-11-output-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n## Variable Types\n\nThe variable types are also an important data component.\n\n::: {.cell execution_count=11}\n```` { .cell-code}\n```{{python}}\ncompany.info()\n```\n\n````\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pandas.core.frame.DataFrame'>\nIndex: 25 entries, Standard Bank Group to Commercial International Bank\nData columns (total 9 columns):\n #   Column        Non-Null Count  Dtype  \n---  ------        --------------  -----  \n 0   rank          25 non-null     int64  \n 1   sales         25 non-null     float64\n 2   profits       25 non-null     float64\n 3   assets        25 non-null     float64\n 4   market_value  25 non-null     float64\n 5   country       25 non-null     object \n 6   continent     25 non-null     object \n 7   latitude      25 non-null     float64\n 8   longitude     25 non-null     float64\ndtypes: float64(6), int64(1), object(2)\nmemory usage: 2.5+ KB\n```\n:::\n:::\n\n\n::: {.cell execution_count=12}\n```` { .cell-code}\n```{{python}}\ncompany.dtypes\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=12}\n```{=tex}\n\\begin{tabular}{ll}\n\\toprule\n{} &        0 \\\\\n\\midrule\nrank         &    int64 \\\\\nsales        &  float64 \\\\\nprofits      &  float64 \\\\\nassets       &  float64 \\\\\nmarket\\_value &  float64 \\\\\ncountry      &   object \\\\\ncontinent    &   object \\\\\nlatitude     &  float64 \\\\\nlongitude    &  float64 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n## Missing Values\n\nLet us check the data for any missing values for sales, profits, assets, market_value, longitude, and latitude.\n\n::: {.cell execution_count=13}\n```` { .cell-code}\n```{{python}}\ncompany[company['sales'].isna()]\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=13}\n```{=tex}\n\\begin{tabular}{lrrrrrllrr}\n\\toprule\nEmpty DataFrame\nColumns: Index(['rank', 'sales', 'profits', 'assets', 'market\\_value', 'country',\n       'continent', 'latitude', 'longitude'],\n      dtype='object')\nIndex: Index([], dtype='object', name='company') \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n::: {.cell execution_count=14}\n```` { .cell-code}\n```{{python}}\ncompany[company['profits'].isna()]\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=14}\n```{=tex}\n\\begin{tabular}{lrrrrrllrr}\n\\toprule\nEmpty DataFrame\nColumns: Index(['rank', 'sales', 'profits', 'assets', 'market\\_value', 'country',\n       'continent', 'latitude', 'longitude'],\n      dtype='object')\nIndex: Index([], dtype='object', name='company') \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n::: {.cell execution_count=15}\n```` { .cell-code}\n```{{python}}\ncompany[company['assets'].isna()]\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=15}\n```{=tex}\n\\begin{tabular}{lrrrrrllrr}\n\\toprule\nEmpty DataFrame\nColumns: Index(['rank', 'sales', 'profits', 'assets', 'market\\_value', 'country',\n       'continent', 'latitude', 'longitude'],\n      dtype='object')\nIndex: Index([], dtype='object', name='company') \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n::: {.cell execution_count=16}\n```` { .cell-code}\n```{{python}}\ncompany[company['market_value'].isna()]\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=16}\n```{=tex}\n\\begin{tabular}{lrrrrrllrr}\n\\toprule\nEmpty DataFrame\nColumns: Index(['rank', 'sales', 'profits', 'assets', 'market\\_value', 'country',\n       'continent', 'latitude', 'longitude'],\n      dtype='object')\nIndex: Index([], dtype='object', name='company') \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n::: {.cell execution_count=17}\n```` { .cell-code}\n```{{python}}\ncompany[company['longitude'].isna()]\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=17}\n```{=tex}\n\\begin{tabular}{lrrrrrllrr}\n\\toprule\nEmpty DataFrame\nColumns: Index(['rank', 'sales', 'profits', 'assets', 'market\\_value', 'country',\n       'continent', 'latitude', 'longitude'],\n      dtype='object')\nIndex: Index([], dtype='object', name='company') \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n::: {.cell execution_count=18}\n```` { .cell-code}\n```{{python}}\ncompany[company['latitude'].isna()]\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=18}\n```{=tex}\n\\begin{tabular}{lrrrrrllrr}\n\\toprule\nEmpty DataFrame\nColumns: Index(['rank', 'sales', 'profits', 'assets', 'market\\_value', 'country',\n       'continent', 'latitude', 'longitude'],\n      dtype='object')\nIndex: Index([], dtype='object', name='company') \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nThis is a conveniently clean data without missing values which is a rare occurrence in data science.\n\n## Summary Statistics\n\nWe use the describe method to make summary statistics for numeric and character variables separately.\n\n::: {.cell execution_count=19}\n```` { .cell-code}\n```{{python}}\ncompany.describe(include = \"float64\")\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=19}\n```{=tex}\n\\begin{tabular}{lrrrrrr}\n\\toprule\n{} &      sales &    profits &      assets &  market\\_value &   latitude &  longitude \\\\\n\\midrule\ncount &  25.000000 &  25.000000 &   25.000000 &     25.000000 &  25.000000 &  25.000000 \\\\\nmean  &   7.068000 &   0.824000 &   25.240000 &     11.064000 & -17.915824 &  19.299126 \\\\\nstd   &   6.109195 &   0.706093 &   38.608073 &      8.497445 &  23.543621 &  10.892318 \\\\\nmin   &   0.600000 &   0.000000 &    2.100000 &      2.800000 & -30.559482 &  -9.429499 \\\\\n25\\%   &   1.900000 &   0.400000 &    5.500000 &      5.900000 & -30.559482 &  22.937506 \\\\\n50\\%   &   5.400000 &   0.600000 &   11.200000 &      8.100000 & -30.559482 &  22.937506 \\\\\n75\\%   &   9.900000 &   0.800000 &   24.700000 &     10.700000 & -30.559482 &  22.937506 \\\\\nmax   &  21.000000 &   2.900000 &  182.000000 &     34.500000 &  31.791702 &  30.802498 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nWe also do the same for string data types.\n\n::: {.cell execution_count=20}\n```` { .cell-code}\n```{{python}}\ncompany.describe(include = \"object\")\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=20}\n```{=tex}\n\\begin{tabular}{lll}\n\\toprule\n{} &       country & continent \\\\\n\\midrule\ncount  &            25 &        25 \\\\\nunique &             5 &         1 \\\\\ntop    &  South Africa &    Africa \\\\\nfreq   &            19 &        25 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nHere we see that there are 25 observations with 5 unique countries. The country with the most companies is the South Africa (19 out of the 25 companies in the sample).\n\n# Analysis\n\nIn this section, we explore some key issues from the data, listed in order.\n\n## **Which Companies are the Best Performing in Africa?**\n\n### ***Companies with the Highest Sales in Africa***\n\nWe start by examining sales. The Standard Bank Group and Sasol lead the pack in this case. Npte that the top 10 companies are from South Africa with the exception of Royal Carribean Cruises from Liberia.\n\n::: {.cell execution_count=21}\n```` { .cell-code}\n```{{python}}\ncompany.nlargest(25, \"sales\")[['country', 'sales']]\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=21}\n```{=tex}\n\\begin{tabular}{llr}\n\\toprule\n{} &       country &  sales \\\\\ncompany                       &               &        \\\\\n\\midrule\nStandard Bank Group           &  South Africa &   21.0 \\\\\nSasol                         &  South Africa &   20.8 \\\\\nMTN Group                     &  South Africa &   16.5 \\\\\nBidvest Group                 &  South Africa &   16.4 \\\\\nSanlam                        &  South Africa &   10.8 \\\\\nShoprite Holdings             &  South Africa &   10.1 \\\\\nSteinhoff International       &  South Africa &    9.9 \\\\\nImperial Holdings             &  South Africa &    9.9 \\\\\nFirstRand                     &  South Africa &    8.4 \\\\\nRoyal Carribean Cruises       &       Liberia &    7.7 \\\\\nMMI Holdings                  &  South Africa &    6.2 \\\\\nAngloGold Ashanti             &  South Africa &    6.1 \\\\\nOrascom Construction          &         Egypt &    5.4 \\\\\nNaspers                       &  South Africa &    5.1 \\\\\nImpala Platinum Holdings      &  South Africa &    3.4 \\\\\nGold Fields                   &  South Africa &    3.4 \\\\\nAttijariwafa Bank             &       Morocco &    3.4 \\\\\nAspen Pharmacare Holdings     &  South Africa &    1.9 \\\\\nBanque Centrale Populaire     &       Morocco &    1.9 \\\\\nRemgro                        &  South Africa &    1.7 \\\\\nAssore                        &  South Africa &    1.6 \\\\\nDangote Cement                &       Nigeria &    1.5 \\\\\nExxaro Resources              &  South Africa &    1.5 \\\\\nCommercial International Bank &         Egypt &    1.5 \\\\\nRMB Holdings                  &  South Africa &    0.6 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n### ***Companies with the Highest Profits in Africa***\n\nIn terms of profits, Sasol and MTN Group from South Africa come up tops. Dangote Cement of Nigeria is the only company on the top 10 that is outside South Africa.\n\n::: {.cell execution_count=22}\n```` { .cell-code}\n```{{python}}\ncompany.nlargest(25, \"profits\")[['country', 'profits']]\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=22}\n```{=tex}\n\\begin{tabular}{llr}\n\\toprule\n{} &       country &  profits \\\\\ncompany                       &               &          \\\\\n\\midrule\nSasol                         &  South Africa &      2.9 \\\\\nMTN Group                     &  South Africa &      2.5 \\\\\nStandard Bank Group           &  South Africa &      1.9 \\\\\nFirstRand                     &  South Africa &      1.6 \\\\\nExxaro Resources              &  South Africa &      1.2 \\\\\nRemgro                        &  South Africa &      1.1 \\\\\nDangote Cement                &       Nigeria &      0.8 \\\\\nAngloGold Ashanti             &  South Africa &      0.8 \\\\\nGold Fields                   &  South Africa &      0.7 \\\\\nOrascom Construction          &         Egypt &      0.7 \\\\\nSteinhoff International       &  South Africa &      0.7 \\\\\nSanlam                        &  South Africa &      0.7 \\\\\nRMB Holdings                  &  South Africa &      0.6 \\\\\nAttijariwafa Bank             &       Morocco &      0.5 \\\\\nBidvest Group                 &  South Africa &      0.5 \\\\\nImpala Platinum Holdings      &  South Africa &      0.5 \\\\\nAssore                        &  South Africa &      0.5 \\\\\nShoprite Holdings             &  South Africa &      0.4 \\\\\nNaspers                       &  South Africa &      0.4 \\\\\nImperial Holdings             &  South Africa &      0.4 \\\\\nAspen Pharmacare Holdings     &  South Africa &      0.4 \\\\\nMMI Holdings                  &  South Africa &      0.3 \\\\\nCommercial International Bank &         Egypt &      0.3 \\\\\nBanque Centrale Populaire     &       Morocco &      0.2 \\\\\nRoyal Carribean Cruises       &       Liberia &      0.0 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n### ***Companies with the Highest Market Value in Africa***\n\nThe picture replicates itself in market valuation.\n\n::: {.cell execution_count=23}\n```` { .cell-code}\n```{{python}}\ncompany.nlargest(25, \"market_value\")[[\"country\", \"market_value\"]]\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=23}\n```{=tex}\n\\begin{tabular}{llr}\n\\toprule\n{} &       country &  market\\_value \\\\\ncompany                       &               &               \\\\\n\\midrule\nMTN Group                     &  South Africa &          34.5 \\\\\nSasol                         &  South Africa &          29.4 \\\\\nNaspers                       &  South Africa &          27.7 \\\\\nStandard Bank Group           &  South Africa &          19.9 \\\\\nFirstRand                     &  South Africa &          18.0 \\\\\nDangote Cement                &       Nigeria &          15.1 \\\\\nSanlam                        &  South Africa &          10.7 \\\\\nShoprite Holdings             &  South Africa &          10.2 \\\\\nRemgro                        &  South Africa &           9.9 \\\\\nAspen Pharmacare Holdings     &  South Africa &           9.7 \\\\\nAngloGold Ashanti             &  South Africa &           9.5 \\\\\nImpala Platinum Holdings      &  South Africa &           9.3 \\\\\nBidvest Group                 &  South Africa &           8.1 \\\\\nRoyal Carribean Cruises       &       Liberia &           7.4 \\\\\nOrascom Construction          &         Egypt &           7.0 \\\\\nAttijariwafa Bank             &       Morocco &           6.7 \\\\\nExxaro Resources              &  South Africa &           6.4 \\\\\nRMB Holdings                  &  South Africa &           6.1 \\\\\nGold Fields                   &  South Africa &           5.9 \\\\\nAssore                        &  South Africa &           5.2 \\\\\nSteinhoff International       &  South Africa &           5.0 \\\\\nImperial Holdings             &  South Africa &           4.2 \\\\\nMMI Holdings                  &  South Africa &           4.0 \\\\\nBanque Centrale Populaire     &       Morocco &           3.9 \\\\\nCommercial International Bank &         Egypt &           2.8 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n## Which Countries and Continents Have the Highest Concentration of Large Companies?\n\nIn this section, we utilize the global rank in size variable to identify the countries and continents with the highest number of top-ranking companies. We see that companies from USA, Japan, China, UK, Canada, and South Korea dominate the rankings. Note that these are countries mainly from North America and Asia (with the exception of the UK) which illustrates the dominance of these two continents in global trade.\n\n::: {.cell execution_count=24}\n```` { .cell-code}\n```{{python}}\ncompany['country'].value_counts()\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=24}\n```{=tex}\n\\begin{tabular}{lr}\n\\toprule\n{} &  country \\\\\n\\midrule\nSouth Africa &       19 \\\\\nMorocco      &        2 \\\\\nEgypt        &        2 \\\\\nNigeria      &        1 \\\\\nLiberia      &        1 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n::: {.cell execution_count=25}\n```` { .cell-code}\n```{{python}}\ncompany['continent'].value_counts()\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=25}\n```{=tex}\n\\begin{tabular}{lr}\n\\toprule\n{} &  continent \\\\\n\\midrule\nAfrica &         25 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nWe then visualize this information on a world map using latitude and longitude data to show the geographic distribution of these companies. The size of the dots represents profits. We find that while there are the profitable companies are mainly in Asia, Europe, and North America. The rest of the world generates very few profits.\n\n::: {.cell execution_count=26}\n```` { .cell-code}\n```{{python}}\n# Create a GeoDataFrame\ngeometry = [Point(lon, lat) for lon, lat in zip(company['longitude'], company['latitude'])]\ngdf = gpd.GeoDataFrame(company, geometry=geometry, columns=['company', 'sales', 'profits', 'assets'])\n```\n\n````\n:::\n\n\n::: {.cell execution_count=27}\n```` { .cell-code}\n```{{python}}\nworld = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))\n```\n\n````\n:::\n\n\n::: {.cell execution_count=28}\n```` { .cell-code}\n```{{python}}\n#| fig-cap: \"Top Companies by Sales on a World Map\"\n# Create a subplot\nfig, ax = plt.subplots(figsize=(10, 10))\n\n# Plot the world map\nworld.boundary.plot(ax=ax, color = \"lightgrey\")\n\n# Plot your data on the map\ngdf.plot(ax=ax, marker='o', color='red', markersize='profits', label='Companies')\n\n# Add labels and legend\nax.set_title('Top Companies in Africa by Profits on a Map')\nax.set_xlabel('Longitude')\nax.set_ylabel('Latitude')\nax.legend()\n\nplt.show()\n```\n\n````\n\n::: {.cell-output .cell-output-display}\n![Top Companies by Sales on a World Map](africa_files/figure-pdf/cell-29-output-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n## Is There a Correlation Between Company Size (in terms of assets) and Financial Performance?\n\nHere, we analyze the relationship between the asset base of companies, which is a proxy for size and financial metrics such as sales, profits, and market value. The goal is to determine if larger companies tend to have higher sales, profits, and market value, or if there are exceptions. Overall, there appears to be a positive link between the size of a company and its financial performance in terms of sales, profits, and market value. However, this relationship varies by country.\n\n::: {.cell execution_count=29}\n```` { .cell-code}\n```{{python}}\n#| fig-cap: \"Pairs plots for the Variables (C)\"\nsns.pairplot(company[[\"country\", \"assets\", \"sales\", \"profits\", \"market_value\"]], hue = \"country\")\n```\n\n````\n\n::: {.cell-output .cell-output-display}\n![Pairs plots for the Variables (C)](africa_files/figure-pdf/cell-30-output-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n::: {.cell execution_count=30}\n```` { .cell-code}\n```{{python}}\ncompany[[\"assets\", \"sales\", \"profits\", \"market_value\"]].corr()\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=30}\n```{=tex}\n\\begin{tabular}{lrrrr}\n\\toprule\n{} &    assets &     sales &   profits &  market\\_value \\\\\n\\midrule\nassets       &  1.000000 &  0.503100 &  0.388891 &      0.273381 \\\\\nsales        &  0.503100 &  1.000000 &  0.637116 &      0.579276 \\\\\nprofits      &  0.388891 &  0.637116 &  1.000000 &      0.766124 \\\\\nmarket\\_value &  0.273381 &  0.579276 &  0.766124 &      1.000000 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n## Are There Regional Patterns in Company Performance Based on Continent?\n\nIn this section, I group the data by country and analyze the average sales, profits, and assets for companies in each country. South African companies in the sample have by far the highest sales, profits, asset base, and market valuation .\n\n::: {.cell execution_count=31}\n```` { .cell-code}\n```{{python}}\n#| fig-cap: \"Sales by Companies\"\ncompany.groupby(\"country\")[\"sales\"].sum().sort_values().plot(kind = \"barh\", title = \"Total Sales of Top Companies in Africa by Country\")\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=31}\n```\n<AxesSubplot:title={'center':'Total Sales of Top Companies in Africa by Country'}, ylabel='country'>\n```\n\nSales by Companies\n:::\n\n::: {.cell-output .cell-output-display}\n![](africa_files/figure-pdf/cell-32-output-2.pdf){fig-pos='H'}\n:::\n:::\n\n\n::: {.cell execution_count=32}\n```` { .cell-code}\n```{{python}}\n#| fig-cap: \"Total Profits of Top 2000 Companies globally by Continent\"\ncompany.groupby(\"country\")[\"profits\"].sum().sort_values().plot(kind = \"barh\", title = \"Total Profits of Top Companies in Africa by Country\")\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=32}\n```\n<AxesSubplot:title={'center':'Total Profits of Top Companies in Africa by Country'}, ylabel='country'>\n```\n\nTotal Profits of Top 2000 Companies globally by Continent\n:::\n\n::: {.cell-output .cell-output-display}\n![](africa_files/figure-pdf/cell-33-output-2.pdf){fig-pos='H'}\n:::\n:::\n\n\n::: {.cell execution_count=33}\n```` { .cell-code}\n```{{python}}\n#| fig-cap: \"Total Assets of Top 2000 Companies globally by Continent\"\ncompany.groupby(\"country\")[\"assets\"].sum().sort_values().plot(kind = \"barh\", title = \"Total Assets of Top Companies in Africa by Country\")\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=33}\n```\n<AxesSubplot:title={'center':'Total Assets of Top Companies in Africa by Country'}, ylabel='country'>\n```\n\nTotal Assets of Top 2000 Companies globally by Continent\n:::\n\n::: {.cell-output .cell-output-display}\n![](africa_files/figure-pdf/cell-34-output-2.pdf){fig-pos='H'}\n:::\n:::\n\n\n## Which Companies, Contiments have the Highest Returns on Assets and Profit margins?\n\nThe return on assets is the ratio of profits to assets and captures the efficiency with which a company utilises its assets to generate profits. The net profit margin also captures how well a company is able to convert its sales into profits. The margin can also proxy the management efforts towards expenses management.\n\nDangote cement of Nigeria leads with a return on assets of 0.25. This is phenomenal!! The companies in the top 5 all have a return greater than 15%, which is an exceptional performance.\n\n::: {.cell execution_count=34}\n```` { .cell-code}\n```{{python}}\ncompany[\"roa\"] = company[\"profits\"] / company[\"assets\"]\ncompany[\"margin\"] = company[\"profits\"] / company[\"sales\"]\n```\n\n````\n:::\n\n\n::: {.cell execution_count=35}\n```` { .cell-code}\n```{{python}}\ncompany['roa'].sort_values(ascending = False).head()\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=35}\n```{=tex}\n\\begin{tabular}{lr}\n\\toprule\n{} &       roa \\\\\ncompany          &           \\\\\n\\midrule\nDangote Cement   &  0.250000 \\\\\nExxaro Resources &  0.244898 \\\\\nAssore           &  0.238095 \\\\\nRMB Holdings     &  0.181818 \\\\\nRemgro           &  0.154930 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nNext, I compute the median ROA for each continent. Nigeria leads, though the country has only one company in the sample. South Africa is in second place with a median ROA of 7%.\n\n::: {.cell execution_count=36}\n```` { .cell-code}\n```{{python}}\ncompany.groupby(\"country\")['roa'].median().sort_values(ascending = False)\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=36}\n```{=tex}\n\\begin{tabular}{lr}\n\\toprule\n{} &       roa \\\\\ncountry      &           \\\\\n\\midrule\nNigeria      &  0.250000 \\\\\nSouth Africa &  0.072727 \\\\\nEgypt        &  0.045849 \\\\\nMorocco      &  0.008872 \\\\\nLiberia      &  0.000000 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nLet us do the same for profit margin. RMB Holdings has a profit margin of 1 which implies that the company generated profits equal to sales. Overall, the conversion of sales to profits is impressive among the industry leaders.\n\n::: {.cell execution_count=37}\n```` { .cell-code}\n```{{python}}\ncompany['margin'].sort_values(ascending = False).head()\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=37}\n```{=tex}\n\\begin{tabular}{lr}\n\\toprule\n{} &    margin \\\\\ncompany          &           \\\\\n\\midrule\nRMB Holdings     &  1.000000 \\\\\nExxaro Resources &  0.800000 \\\\\nRemgro           &  0.647059 \\\\\nDangote Cement   &  0.533333 \\\\\nAssore           &  0.312500 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\nNigeria and Egypt leads in median profit margin. Again this could be die to the low number of companies from the coutries in this sample.\n\n::: {.cell execution_count=38}\n```` { .cell-code}\n```{{python}}\ncompany.groupby(\"country\")['margin'].median().sort_values(ascending = False)\n```\n\n````\n\n::: {.cell-output .cell-output-display execution_count=38}\n```{=tex}\n\\begin{tabular}{lr}\n\\toprule\n{} &    margin \\\\\ncountry      &           \\\\\n\\midrule\nNigeria      &  0.533333 \\\\\nEgypt        &  0.164815 \\\\\nSouth Africa &  0.139423 \\\\\nMorocco      &  0.126161 \\\\\nLiberia      &  0.000000 \\\\\n\\bottomrule\n\\end{tabular}\n```\n:::\n:::\n\n\n# **Conclusion**\n\nIn this analysis, we use data from Kagle to illustrate the use of Python and Pandas in data analysis. From the analysis, we find that;\n\n1.  Most large companies in the sample are located in South Africa.\n2.  There is a positive relationship between company size and financial performance (sales, profits, market value). However, this relationship varies across countries.\n3.  Companies from South Africa have the highest sales, profits, asset base, and valuation.\n4.  Companies in Nigeria are more efficient in converting sales and assets into profits.\n\n# **References** {.unnumbered}\n\n",
    "supporting": [
      "africa_files"
    ],
    "filters": []
  }
}